{
  "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
  "title":"Percentage of Obese adults in the world",
  "width":800,
  "height":600,
  "projection":{
     "type":"equirectangular"
  },
  "params":[
     {
        "name":"year_select",
        "value":"1990",
        "bind":{
           "input":"range",
           "min":1975,
           "max":2016,
           "step":1,
           "name":"Year select"
        }
     }
  ],
  "layer":[
     {
        "data":{
           "url":"https://raw.githubusercontent.com/30609844/HW-week9/main/js/ne_110m_admin_0_countries.topojson",
           "format":{
              "type":"topojson",
              "feature":"ne_110m_admin_0_countries"
           }
        },
        "mark":{
           "type":"geoshape",
           "fill":"lightgray",
           "stroke":"black",
           "strokeWidth":0.2
        },
        "encoding":{
           "tooltip":{
              "field":"Entity",
              "type":"nominal",
              "title":"Country"
           }
        }
     },
     {
        "data":{
           "url":"https://raw.githubusercontent.com/30609844/HW-week10/main/data/share-of-adults-defined-as-obese.csv"
        },
        "transform":[
           {
              "filter":"datum.Year == year_select"
           },
           {
              "lookup":"Code",
              "from":{
                 "data":{
                    "url":"https://raw.githubusercontent.com/30609844/HW-week9/main/js/ne_110m_admin_0_countries.topojson",
                    "format":{
                       "type":"topojson",
                       "feature":"ne_110m_admin_0_countries"
                    }
                 },
                 "key":"properties.GU_A3"
              },
              "as":"geo"
           }
        ],
        "mark":{
           "type":"geoshape",
           "stroke":"black",
           "strokeWidth":0.2
        },
        "encoding":{
           "shape":{
              "field":"geo",
              "type":"geojson"
           },
           "color":{
             "title": "",
              "field":"Obesity",
              "type":"quantitative",
              "scale":{
                 "type":"linear",
                 "domain":[
                    0,
                    30
                 ],
                 "range":[
                    "#fff7bc",
                    "#a63603"
                 ]
              },
              "legend":{
                 "orient":"top",
                 "gradientLength":800,
                 "titleLimit":300,
                 "titleAlign":"center",
                 "titleBaseline":"middle",
                 "direction":"horizontal"
              }
           },
           "tooltip":[
              {
                 "field":"Entity",
                 "type":"nominal",
                 "title":"Country"
              },
              {
                 "field":"Obesity",
                 "type":"quantitative",
                 "title":"Percentage of adults that are obese"
              },
              {
                 "field":"Year",
                 "type":"nominal"
              }
           ]
        }
     }
  ]
}